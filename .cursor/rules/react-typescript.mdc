---
globs: "Stalk_FE/**/*.{ts,tsx}"
description: "React + TypeScript ê°œë°œ ê·œì¹™"
---

# âš›ï¸ React + TypeScript ê°œë°œ ê·œì¹™

## ğŸ¯ ì»´í¬ë„ŒíŠ¸ ì‘ì„± ê·œì¹™

### í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
```typescript
// âœ… ì˜¬ë°”ë¥¸ ë°©ì‹
interface ButtonProps {
  onClick: () => void;
  children: React.ReactNode;
  variant?: 'primary' | 'secondary';
}

const Button: React.FC<ButtonProps> = ({ onClick, children, variant = 'primary' }) => {
  return (
    <button 
      onClick={onClick}
      className={`btn btn-${variant}`}
    >
      {children}
    </button>
  );
};

// âŒ í”¼í•´ì•¼ í•  ë°©ì‹
const Button = (props: any) => { // any íƒ€ì… ì‚¬ìš© ê¸ˆì§€
  return <button>{props.children}</button>;
};
```

### Props ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— Props ì¸í„°í˜ì´ìŠ¤ ì •ì˜ í•„ìˆ˜
- optional propsëŠ” `?` ì‚¬ìš©
- childrenì´ í•„ìš”í•œ ê²½ìš° `React.ReactNode` íƒ€ì… ì‚¬ìš©
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ëª…í™•í•œ íƒ€ì… ì •ì˜

```typescript
interface Props {
  title: string;
  isLoading?: boolean;
  onSubmit: (data: FormData) => void;
  children?: React.ReactNode;
}
```

## ğŸª Hooks ì‚¬ìš© ê·œì¹™

### Custom Hooks ì‘ì„±
```typescript
// âœ… Custom Hook ì˜ˆì‹œ
interface UseApiResult<T> {
  data: T | null;
  loading: boolean;
  error: string | null;
  refetch: () => void;
}

const useApi = <T>(url: string): UseApiResult<T> => {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const fetchData = useCallback(async () => {
    setLoading(true);
    try {
      const response = await fetch(url);
      const result = await response.json();
      setData(result);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜');
    } finally {
      setLoading(false);
    }
  }, [url]);

  useEffect(() => {
    fetchData();
  }, [fetchData]);

  return { data, loading, error, refetch: fetchData };
};
```

### useState íƒ€ì… ì •ì˜
```typescript
// âœ… ëª…ì‹œì  íƒ€ì… ì •ì˜
const [user, setUser] = useState<User | null>(null);
const [isLoading, setIsLoading] = useState<boolean>(false);
const [errors, setErrors] = useState<Record<string, string>>({});

// âœ… ì´ˆê¸°ê°’ìœ¼ë¡œ íƒ€ì… ì¶”ë¡  ê°€ëŠ¥í•œ ê²½ìš°
const [count, setCount] = useState(0); // numberë¡œ ì¶”ë¡ 
const [message, setMessage] = useState(''); // stringìœ¼ë¡œ ì¶”ë¡ 
```

## ğŸ“‹ í¼ ì²˜ë¦¬ ê·œì¹™

### í¼ ë°ì´í„° íƒ€ì… ì •ì˜
```typescript
interface LoginFormData {
  email: string;
  password: string;
}

interface SignupFormData extends LoginFormData {
  confirmPassword: string;
  terms: boolean;
}

const LoginForm: React.FC = () => {
  const [formData, setFormData] = useState<LoginFormData>({
    email: '',
    password: ''
  });

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    // í¼ ì œì¶œ ë¡œì§
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* í¼ í•„ë“œë“¤ */}
    </form>
  );
};
```

## ğŸ”„ ìƒíƒœ ê´€ë¦¬ ê·œì¹™

### Context API ì‚¬ìš©
```typescript
// âœ… Context íƒ€ì… ì •ì˜
interface AuthContextType {
  user: User | null;
  login: (credentials: LoginCredentials) => Promise<void>;
  logout: () => void;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

// âœ… Custom Hookìœ¼ë¡œ Context ì ‘ê·¼
const useAuth = (): AuthContextType => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
```

## ğŸ¨ ìŠ¤íƒ€ì¼ë§ ê·œì¹™

### Tailwind CSS í´ë˜ìŠ¤ ì •ë¦¬
```typescript
// âœ… í´ë˜ìŠ¤ëª… ì •ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©
import { cn } from '@/utils';

const Button: React.FC<ButtonProps> = ({ variant, size, className, ...props }) => {
  return (
    <button
      className={cn(
        'font-medium rounded focus:outline-none focus:ring-2',
        {
          'bg-blue-500 text-white hover:bg-blue-600': variant === 'primary',
          'bg-gray-200 text-gray-800 hover:bg-gray-300': variant === 'secondary',
        },
        {
          'px-4 py-2 text-sm': size === 'sm',
          'px-6 py-3 text-base': size === 'md',
          'px-8 py-4 text-lg': size === 'lg',
        },
        className
      )}
      {...props}
    />
  );
};
```

## ğŸ” íƒ€ì… ê°€ë“œ ì‚¬ìš©

### API ì‘ë‹µ íƒ€ì… ê²€ì¦
```typescript
// âœ… íƒ€ì… ê°€ë“œ í•¨ìˆ˜
const isUser = (data: unknown): data is User => {
  return (
    typeof data === 'object' &&
    data !== null &&
    'id' in data &&
    'email' in data &&
    'name' in data
  );
};

// âœ… API ì‘ë‹µ ì²˜ë¦¬
const fetchUser = async (id: string): Promise<User> => {
  const response = await fetch(`/api/users/${id}`);
  const data = await response.json();
  
  if (!isUser(data)) {
    throw new Error('Invalid user data received');
  }
  
  return data;
};
```

## ğŸš« í”¼í•´ì•¼ í•  íŒ¨í„´

### ì•ˆí‹°íŒ¨í„´ë“¤
```typescript
// âŒ any íƒ€ì… ë‚¨ìš©
const handleData = (data: any) => { /* ... */ };

// âŒ ì¸ë¼ì¸ ê°ì²´/í•¨ìˆ˜
<Button onClick={() => console.log('clicked')} />

// âŒ ê¹Šì€ prop drilling
<GrandChild prop1={prop1} prop2={prop2} prop3={prop3} />

// âŒ ì§ì ‘ì ì¸ DOM ì¡°ì‘
document.getElementById('my-element')?.style.display = 'none';

// âŒ useEffect ì˜ì¡´ì„± ë°°ì—´ ëˆ„ë½
useEffect(() => {
  fetchData();
}, []); // fetchDataê°€ ì˜ì¡´ì„±ì— ì—†ìŒ
```

## âœ… ê¶Œì¥í•˜ëŠ” íŒ¨í„´

### ì¢‹ì€ íŒ¨í„´ë“¤
```typescript
// âœ… ëª…í™•í•œ íƒ€ì… ì •ì˜
interface HandleDataOptions {
  validateFirst: boolean;
  transformData: (data: RawData) => ProcessedData;
}

const handleData = (data: RawData, options: HandleDataOptions) => { /* ... */ };

// âœ… useCallback ì‚¬ìš©
const handleClick = useCallback(() => {
  console.log('clicked');
}, []);

// âœ… Contextë‚˜ propsë¡œ ìƒíƒœ ì „ë‹¬
const { user, updateUser } = useAuth();

// âœ… refë¥¼ í†µí•œ DOM ì ‘ê·¼
const elementRef = useRef<HTMLDivElement>(null);
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‘ì„± ê¶Œì¥ì‚¬í•­

### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
```typescript
// âœ… ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  it('should call onClick when clicked', () => {
    const mockOnClick = vi.fn();
    render(<Button onClick={mockOnClick}>Click me</Button>);
    
    const button = screen.getByRole('button', { name: /click me/i });
    fireEvent.click(button);
    
    expect(mockOnClick).toHaveBeenCalledTimes(1);
  });
});
```

## ğŸ“¦ Import/Export ê·œì¹™

### íŒŒì¼ êµ¬ì¡°ì™€ Import
```typescript
// âœ… Named exports ì‚¬ìš©
export const Button: React.FC<ButtonProps> = ({ ... }) => { ... };
export const Input: React.FC<InputProps> = ({ ... }) => { ... };

// âœ… ì¸ë±ìŠ¤ íŒŒì¼ë¡œ re-export
// components/ui/index.ts
export { Button } from './Button';
export { Input } from './Input';

// âœ… ì ˆëŒ€ ê²½ë¡œ import ì‚¬ìš©
import { Button, Input } from '@/components/ui';
import { useAuth } from '@/hooks';
import { authService } from '@/services';
```